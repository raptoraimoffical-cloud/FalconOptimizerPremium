{
  "items": [
    {
      "id": "gamepack_autodetect",
      "type": "action",
      "name": "Auto-Detect Games & Recommend Falcon Setup",
      "description": "[Analyzer] Scans for popular competitive titles (Fortnite, Valorant, CS2, Apex, etc.) and prints per-game Falcon module recommendations.",
      "requiresAdmin": false,
      "riskLevel": "Safe",
      "category": "GamePack 2.0 / Analyzer",
      "apply": {
        "steps": [
          {
            "type": "ps.run",
            "command": "Write-Output \"=== FALCON GAMEPACK 2.0: GAME AUTO-DETECT & RECOMMEND ===\"\nWrite-Output \"\"\nWrite-Output \"Scanning for installed competitive titles and mapping them to Falcon modules...\"\nWrite-Output \"\"\n\n$results = @()\n\nfunction Test-GamePath {\n  param(\n    [string]$Name,\n    [string[]]$Paths\n  )\n  foreach ($p in $Paths) {\n    if ([string]::IsNullOrWhiteSpace($p)) { continue }\n    try {\n      if (Test-Path $p) {\n        return @{ Name = $Name; Installed = $true; Path = $p }\n      }\n    } catch {}\n  }\n  return @{ Name = $Name; Installed = $false; Path = $null }\n}\n\n# Build candidate paths per game\n\n$programFiles      = ${env:ProgramFiles}\n$programFilesX86   = ${env:ProgramFiles(x86)}\n$localAppData      = ${env:LOCALAPPDATA}\n$commonProgramData = ${env:ProgramData}\n\n$games = @()\n\n# Fortnite (Epic)\n$fnPaths = @()\n$fnPaths += (Join-Path $programFiles \"Epic Games\\Fortnite\")\n$fnPaths += (Join-Path $programFilesX86 \"Epic Games\\Fortnite\")\n$games += Test-GamePath -Name \"Fortnite\" -Paths $fnPaths\n\n# Valorant (Riot)\n$valPaths = @()\n$valPaths += (Join-Path $programFiles \"Riot Games\\VALORANT\")\n$valPaths += (Join-Path $programFilesX86 \"Riot Games\\VALORANT\")\n$valPaths += (Join-Path $localAppData \"VALORANT\")\n$games += Test-GamePath -Name \"Valorant\" -Paths $valPaths\n\n# CS2 (Steam)\n$steamCommon = @()\n$steamCommon += (Join-Path $programFilesX86 \"Steam\\steamapps\\common\")\n$steamCommon += (Join-Path $programFiles \"Steam\\steamapps\\common\")\n$cs2Paths = @()\nforeach ($s in $steamCommon) {\n  if (-not [string]::IsNullOrWhiteSpace($s)) {\n    $cs2Paths += (Join-Path $s \"Counter-Strike Global Offensive\")\n    $cs2Paths += (Join-Path $s \"Counter-Strike 2\")\n  }\n}\n$games += Test-GamePath -Name \"CS2\" -Paths $cs2Paths\n\n# Apex Legends (Steam / Origin)\n$apexPaths = @()\nforeach ($s in $steamCommon) {\n  if (-not [string]::IsNullOrWhiteSpace($s)) {\n    $apexPaths += (Join-Path $s \"Apex Legends\")\n  }\n}\n$apexPaths += (Join-Path $programFiles \"Origin Games\\Apex\")\n$apexPaths += (Join-Path $programFilesX86 \"Origin Games\\Apex\")\n$games += Test-GamePath -Name \"Apex Legends\" -Paths $apexPaths\n\n# Rocket League (Steam / Epic)\n$rlPaths = @()\nforeach ($s in $steamCommon) {\n  if (-not [string]::IsNullOrWhiteSpace($s)) {\n    $rlPaths += (Join-Path $s \"rocketleague\")\n  }\n}\n$rlPaths += (Join-Path $programFiles \"Epic Games\\rocketleague\")\n$games += Test-GamePath -Name \"Rocket League\" -Paths $rlPaths\n\n# GTA V\n$gtaPaths = @()\nforeach ($s in $steamCommon) {\n  if (-not [string]::IsNullOrWhiteSpace($s)) {\n    $gtaPaths += (Join-Path $s \"Grand Theft Auto V\")\n  }\n}\n$gtaPaths += (Join-Path $programFiles \"Rockstar Games\\Grand Theft Auto V\")\n$gtaPaths += (Join-Path $programFilesX86 \"Rockstar Games\\Grand Theft Auto V\")\n$games += Test-GamePath -Name \"GTA V\" -Paths $gtaPaths\n\n# League of Legends\n$lolPaths = @()\n$lolPaths += (Join-Path $programFiles \"Riot Games\\League of Legends\")\n$lolPaths += (Join-Path $programFilesX86 \"Riot Games\\League of Legends\")\n$games += Test-GamePath -Name \"League of Legends\" -Paths $lolPaths\n\n# GeForce NOW (cloud)\n$gfnPaths = @()\n$gfnPaths += (Join-Path $programFiles \"NVIDIA Corporation\\NVIDIA GeForce NOW\")\n$gfnPaths += (Join-Path $programFilesX86 \"NVIDIA Corporation\\NVIDIA GeForce NOW\")\n$games += Test-GamePath -Name \"GeForce NOW\" -Paths $gfnPaths\n\nWrite-Output \"Detected games:\"\nforeach ($g in $games) {\n  if ($g.Installed) {\n    Write-Output (\"  - {0}: Installed at {1}\" -f $g.Name, $g.Path)\n  } else {\n    Write-Output (\"  - {0}: Not detected (using heuristics only)\" -f $g.Name)\n  }\n}\n\nWrite-Output \"\"\nWrite-Output \"=== Falcon GamePack 2.0 Recommendations ===\"\nWrite-Output \"\"\n\nforeach ($g in $games) {\n  if (-not $g.Installed) { continue }\n\n  switch ($g.Name) {\n    \"Fortnite\" {\n      Write-Output \">> Fortnite:\"\n      Write-Output \"   - Use: Game Specific → Fortnite\"\n      Write-Output \"   - Combine with: StretchLab, Input Latency Lab, Network Latency Lab, and Driver Lab cache cleanup.\"\n      Write-Output \"   - Suggested Falcon mode: Competitive / Extreme (if your hardware and stability are good).\"\n      Write-Output \"\"\n    }\n    \"Valorant\" {\n      Write-Output \">> Valorant:\"\n      Write-Output \"   - Use: Game Specific → Valorant\"\n      Write-Output \"   - Combine with: Input Latency Lab, Network Latency Lab (NIC tuning), DPC Latency Lab.\"\n      Write-Output \"   - Suggested Falcon mode: Competitive (avoid fully nuking services Riot might require).\"\n      Write-Output \"\"\n    }\n    \"CS2\" {\n      Write-Output \">> CS2:\"\n      Write-Output \"   - Use: Game Specific → CS2\"\n      Write-Output \"   - Combine with: Driver Lab (cache cleanup), Audio Lab (for clean positional audio), DPC Latency Lab.\"\n      Write-Output \"   - Suggested Falcon mode: Competitive or Extreme depending on stability.\"\n      Write-Output \"\"\n    }\n    \"Apex Legends\" {\n      Write-Output \">> Apex Legends:\"\n      Write-Output \"   - Use: Game Specific → Apex Legends\"\n      Write-Output \"   - Combine with: Network Latency Lab, Driver Lab cache cleanup, Thermal Engine (if CPU/GPU run hot).\"\n      Write-Output \"\"\n    }\n    \"Rocket League\" {\n      Write-Output \">> Rocket League:\"\n      Write-Output \"   - Use: Game Specific → Rocket League\"\n      Write-Output \"   - Combine with: Input Latency Lab (controller/HID tuning), Network Latency Lab jitter tests.\"\n      Write-Output \"\"\n    }\n    \"GTA V\" {\n      Write-Output \">> GTA V:\"\n      Write-Output \"   - Use: Game Specific → GTA V\"\n      Write-Output \"   - Combine with: Thermal Engine (extended sessions), Audio Lab, and moderate debloat.\"\n      Write-Output \"\"\n    }\n    \"League of Legends\" {\n      Write-Output \">> League of Legends:\"\n      Write-Output \"   - Use: Game Specific → League of Legends\"\n      Write-Output \"   - Combine with: Network Latency Lab, DPC Latency Lab to keep input + camera panning smooth.\"\n      Write-Output \"\"\n    }\n    \"GeForce NOW\" {\n      Write-Output \">> GeForce NOW:\"\n      Write-Output \"   - Use: Game Specific → GeForce NOW\"\n      Write-Output \"   - Combine with: Network Latency Lab, Driver Lab (for GPU encoding stability), and Audio Lab.\"\n      Write-Output \"\"\n    }\n  }\n}\n\nWrite-Output \"If a game is not detected but installed in a non-standard path, you can still use its Falcon tab manually.\"\nWrite-Output \"GamePack 2.0 does not auto-change configs; it gives you a per-game Falcon roadmap based on what it finds.\"\nWrite-Output \"\"\nWrite-Output \"=== END OF GAMEPACK 2.0 AUTO-DETECT ===\""
          }
        ]
      },
      "revert": {
        "steps": [
          {
            "type": "ps.run",
            "command": "Write-Output @\"\nGame auto-detect is read-only and needs no revert.\n\"@"
          }
        ]
      }
    }
  ]
}