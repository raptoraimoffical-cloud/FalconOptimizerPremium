/* Phase 4: Visual polish + accessibility (non-breaking overrides) */
:root{
  --radius-xs: 8px;
  --radius-sm: 12px;
  --radius-md: 16px;
  --radius-lg: 20px;
  --shadow-sm: 0 1px 2px rgba(2,6,23,.06);
  --shadow-md: 0 10px 24px rgba(2,6,23,.10);
  --shadow-lg: 0 18px 48px rgba(2,6,23,.14);
  --ring: 0 0 0 3px rgba(59,130,246,.35);
  --ring-strong: 0 0 0 4px rgba(59,130,246,.45);
}

html, body{
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  font-feature-settings: "ss01" 1, "ss02" 1;
}

body{
  line-height: 1.35;
}

/* Consistent spacing rhythm */
#app, #topbar, #sidebar, #main{
  gap: 12px;
}

/* Buttons + clickable controls */
button, .btn, [role="button"]{
  border-radius: var(--radius-sm);
  transition: transform .08s ease, box-shadow .12s ease, background-color .12s ease, border-color .12s ease, opacity .12s ease;
}

button:hover, .btn:hover, [role="button"]:hover{
  box-shadow: var(--shadow-sm);
}

button:active, .btn:active, [role="button"]:active{
  transform: translateY(1px);
}

/* Inputs */
input, select, textarea{
  border-radius: var(--radius-sm);
  outline: none;
}

input:focus, select:focus, textarea:focus{
  box-shadow: var(--ring);
}

/* Focus-visible for keyboard users */
:focus-visible{
  outline: none !important;
  box-shadow: var(--ring-strong) !important;
}

/* Cards */
.card, .panel, .box, .tile{
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
}

.card:hover, .panel:hover, .box:hover, .tile:hover{
  box-shadow: var(--shadow-md);
}

/* Risk chips (works with existing badge/chip styles) */
.badge, .chip{
  border-radius: 999px;
  padding: 3px 10px;
  font-weight: 600;
  letter-spacing: .01em;
}

/* Subtle scrollbars */
*{
  scrollbar-width: thin;
  scrollbar-color: rgba(2,6,23,.28) transparent;
}
*::-webkit-scrollbar{ width: 10px; height: 10px; }
*::-webkit-scrollbar-thumb{
  background: rgba(2,6,23,.22);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: content-box;
}
*::-webkit-scrollbar-thumb:hover{
  background: rgba(2,6,23,.32);
  border: 2px solid transparent;
  background-clip: content-box;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  *{
    transition: none !important;
    scroll-behavior: auto !important;
  }
}


/* PHASE4_REAL_START */
/* Phase 4 (real): layout, nav polish, responsive sidebar, accessibility */
:root{
  --space-1: 6px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 18px;
  --space-5: 24px;
  --bg-0: rgba(10,10,14,0.82);
  --bg-1: rgba(255,255,255,0.04);
  --bg-2: rgba(255,255,255,0.06);
  --bd-1: rgba(255,255,255,0.10);
  --bd-2: rgba(255,255,255,0.14);
  --tx-0: rgba(232,232,239,0.95);
  --tx-1: rgba(232,232,239,0.70);
  --tx-2: rgba(232,232,239,0.55);
}

/* Icon button */
.icon-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width: 38px;
  height: 38px;
  border-radius: 12px;
  border: 1px solid var(--bd-1);
  background: rgba(255,255,255,0.04);
  color: inherit;
}
.icon-btn:hover{ background: rgba(255,255,255,0.06); border-color: var(--bd-2); }
.icon-btn:active{ transform: translateY(1px); }

/* Simple menu icon (no SVG dependency) */
.icon-menu{
  width: 16px;
  height: 12px;
  position: relative;
  display: inline-block;
}
.icon-menu::before, .icon-menu::after, .icon-menu span{
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  border-radius: 999px;
  background: rgba(232,232,239,0.85);
}
.icon-menu::before{ top: 0; }
.icon-menu span{ top: 5px; }
.icon-menu::after{ bottom: 0; }
.icon-menu{ }
.icon-menu > span{ display:block; }

/* Topbar polish */
.topbar{
  backdrop-filter: blur(10px);
  background: rgba(10,10,14,0.55);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 16px;
  margin: 12px 12px 0 12px;
  padding: 10px 12px;
}
.topbar-left{ gap: 12px; align-items:center; }
.page-title{ font-size: 18px; letter-spacing: .2px; }
.page-sub{ color: var(--tx-2); }

/* Sidebar polish + collapse */
.sidebar{
  border-radius: 18px;
  margin: 12px 0 12px 12px;
  border: 1px solid rgba(255,255,255,0.06);
  background: rgba(10,10,14,0.65);
  backdrop-filter: blur(10px);
  overflow: hidden;
}
.nav .nav-item{
  border-radius: 12px;
  margin: 4px 10px;
  padding: 10px 12px;
  text-align: left;
  border: 1px solid transparent;
  background: transparent;
}
.nav .nav-item:hover{
  background: rgba(255,255,255,0.06);
}
.nav .nav-item.active{
  background: rgba(255,255,255,0.08);
  border-color: rgba(255,255,255,0.10);
  box-shadow: 0 10px 24px rgba(0,0,0,0.18);
}
.nav-section{
  color: rgba(232,232,239,0.55);
  letter-spacing: .08em;
  font-size: 13px;
  padding: 12px 16px 6px 16px;
}

body.sidebar-collapsed .sidebar{
  width: 72px !important;
}
body.sidebar-collapsed .brand-text,
body.sidebar-collapsed .nav-section{
  display:none !important;
}
body.sidebar-collapsed .nav .nav-item{
  justify-content:center;
  padding: 10px 0;
}
body.sidebar-collapsed .nav .nav-item::after{
  content: attr(data-route);
  display:none;
}

/* Main content container */
.main{
  margin: 12px 12px 12px 0;
}
.panel{
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.06);
  background: rgba(10,10,14,0.45);
  backdrop-filter: blur(10px);
}

/* Cards: tighten density + hierarchy */
.card{
  padding: 14px 14px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
}
.card .title{ font-size: 14px; font-weight: 800; }
.card .muted{ color: var(--tx-2); }

/* Tables/lists: readability */
.table, table{
  border-radius: 16px;
  overflow: hidden;
}
th{ color: rgba(232,232,239,0.72); }
td{ color: rgba(232,232,239,0.88); }

/* Toasts: more readable */
#themeFxToastHost .toast, .toast{
  border-radius: 16px !important;
  border: 1px solid rgba(255,255,255,0.12) !important;
  background: rgba(10,10,14,0.92) !important;
  box-shadow: 0 18px 48px rgba(0,0,0,0.55) !important;
}

/* Responsive: collapse sidebar automatically on smaller widths */
@media (max-width: 980px){
  body:not(.sidebar-collapsed) .sidebar{
    width: 240px;
  }
}
@media (max-width: 860px){
  body .sidebar{
    position: fixed;
    left: 12px;
    top: 12px;
    bottom: 12px;
    z-index: 1200;
    transform: translateX(-110%);
    transition: transform .18s ease;
  }
  body.sidebar-open .sidebar{
    transform: translateX(0);
  }
  /* click-out overlay */
  body.sidebar-open::before{
    content:"";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    /* IMPORTANT: never block clicks on main content (can make buttons feel "unclickable"). */
    pointer-events: none;
    z-index: 0;
  }
  .main{ margin-left: 12px; }
}

/* Reduce “dense wall of text” */
p, li{ max-width: 86ch; }

/* Keyboard hints (optional class) */
.kbd{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 2px 8px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.05);
  font-size: 14px;
  color: rgba(232,232,239,0.88);
}


/* BIOS Optimizer */
.bios-top{ display:grid; grid-template-columns: 1.2fr 0.8fr; gap:12px; align-items:start; }
@media(max-width: 980px){ .bios-top{ grid-template-columns: 1fr; } }
.bios-kv{ display:flex; justify-content:space-between; gap:12px; padding:6px 0; border-bottom:1px solid rgba(255,255,255,0.06); }
.bios-kv span{ opacity:0.9; }
.bios-actions{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
.bios-block .bios-list{ display:flex; flex-direction:column; gap:10px; margin-top:8px; }
.bios-item{ padding:10px; border:1px solid rgba(255,255,255,0.08); border-radius:10px; }
.bios-item-main{ display:flex; justify-content:space-between; gap:10px; align-items:flex-start; }
.bios-item-title{ font-weight:600; }
.bios-item-sub{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; opacity:0.9; }
.bios-item-where{ opacity:0.9; font-size:12px; }
.bios-item-value{ margin-top:6px; font-weight:600; opacity:0.95; }
.bios-item-note{ margin-top:4px; opacity:0.9; font-size:12px; line-height:1.35; }
.textarea{ width:100%; background:rgba(0,0,0,0.25); border:1px solid rgba(255,255,255,0.10); color:inherit; padding:10px; border-radius:10px; resize:vertical; }
.select{ width:100%; background:rgba(0,0,0,0.25); border:1px solid rgba(255,255,255,0.10); color:inherit; padding:10px; border-radius:10px; }
.log-box{ margin-top:10px; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.10); background:rgba(0,0,0,0.25); max-height:220px; overflow:auto; white-space:pre-wrap; }
.divider{ height:1px; background:rgba(255,255,255,0.08); margin:12px 0; }


/* BIOS Optimizer toolbar + accordions */
.bios-toolbar{ position:sticky; top:0; z-index:5; backdrop-filter: blur(10px); background:rgba(0,0,0,0.35); }
.bios-toolbar-row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.bios-toolbar-row + .bios-toolbar-row{ margin-top:10px; }
.input{ flex:1; min-width:260px; background:rgba(0,0,0,0.25); border:1px solid rgba(255,255,255,0.10); color:inherit; padding:10px; border-radius:10px; }
.check{ display:flex; gap:8px; align-items:center; font-size:13px; opacity:0.92; }
.check input{ width:16px; height:16px; }
.spacer{ flex:1; }

/* <details> blocks */
details.bios-block{ padding:0; overflow:hidden; }
details.bios-block > .bios-list{ padding:12px; }
.bios-block-summary{ list-style:none; cursor:pointer; display:flex; justify-content:space-between; align-items:center; padding:12px; }
.bios-block-summary::-webkit-details-marker{ display:none; }
.bios-block-title{ font-weight:700; }
.bios-block-meta{ opacity:0.88; font-size:12px; }
details.bios-block[open] .bios-block-summary{ border-bottom:1px solid rgba(255,255,255,0.08); }


/* Sidebar de-compress fix */
.sidebar{ flex-shrink:0; width:260px; min-width:260px; }
.main{ flex:1; min-width:0; }
.nav{ overflow-y:auto; }

/* Run History modal */
.modal{ position:fixed; inset:0; z-index:99999; }
.modal .modal-backdrop{ position:absolute; inset:0; background: rgba(0,0,0,0.55); }
.modal .modal-card{
  position:relative;
  max-width: 920px;
  margin: 6vh auto;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(10,10,14,0.92);
  padding: 14px;
}
.modal .modal-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; }
.modal .modal-title{ font-weight:700; }


/* ===== Phase 4 Hotfix: Contrast + Performance + Switch Visibility ===== */

/* Reduce expensive effects that cause scroll jank on some GPUs */
#sidebar, #topbar, .card, .panel, .modal, .sheet{
  backdrop-filter: none !important;
}

/* Prefer solid backgrounds for smoother scrolling */
#sidebar{
  background: rgba(10,12,18,0.92) !important;
}
#topbar{
  background: rgba(12,14,22,0.92) !important;
}

/* Make text readable everywhere */
body, #app, #main, .content{
  color: rgba(245,247,255,0.94) !important;
}
.muted, .subtle, .desc, .hint, .rh-meta{
  color: rgba(230,235,255,0.78) !important;
}

/* Switches: higher contrast + visible track/thumb */
.toggle,
.fo-switch-track{
  background: rgba(255,255,255,0.18) !important;
  border-color: rgba(255,255,255,0.26) !important;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.25) !important;
}
.toggle::after,
.fo-switch-thumb{
  background: rgba(255,255,255,0.98) !important;
  box-shadow: 0 6px 16px rgba(0,0,0,0.35) !important;
}
.toggle.on,
.fo-switch-input:checked + .fo-switch-track{
  background: rgba(59,130,246,0.42) !important; /* blue */
  border-color: rgba(59,130,246,0.62) !important;
  box-shadow: 0 0 0 1px rgba(0,0,0,0.22), 0 0 22px rgba(59,130,246,0.35) !important;
}

/* Ensure switch focus ring is obvious */
.toggle:focus-visible,
.fo-switch-input:focus-visible + .fo-switch-track{
  outline: 3px solid rgba(255,255,255,0.55) !important;
  outline-offset: 3px !important;
}

/* Run History: stronger contrast + readable log */
.run-history-list .rh-item{
  background: rgba(255,255,255,0.06) !important;
  border-color: rgba(255,255,255,0.14) !important;
}
#runHistoryModalLog, pre.log, .log{
  background: rgba(0,0,0,0.55) !important;
  color: rgba(245,247,255,0.95) !important;
  border: 1px solid rgba(255,255,255,0.14) !important;
}

/* Side UI compression: enforce min widths */
#sidebar{
  min-width: 260px !important;
  width: 280px !important;
  flex: 0 0 280px !important;
}
#main{
  min-width: 0 !important;
}

/* Smooth scrolling performance: contain large sections */
.card, .panel, .run-history-list, .grid, .list{
  contain: content;
}
.content, #content, .content-scroll{
  will-change: scroll-position;
}

/* Reduce motion that can stutter */
@media (prefers-reduced-motion: reduce){
  *{ transition: none !important; animation: none !important; }
}


/* Let Chromium skip offscreen rendering (big perf win on long pages) */
.cards, .card-list, .items, .item-list, .tweak-list, .grid, .run-history-list{
  content-visibility: auto;
  contain-intrinsic-size: 800px 600px;
}


/* Falcon FIX: sidebar width + no compression */
.sidebar{ flex: 0 0 270px; width:270px; min-width:250px; flex-shrink:0; }
.nav{ overflow:auto; max-height: calc(100vh - 120px); }


/* =============================
   READABILITY PATCH (scan+fix)
   - Avoid 10–11px text
   - Avoid low-opacity labels
   - Improve placeholder/disabled contrast
   ============================= */

:root{
  --readable-muted-light: rgba(2,6,23,0.72);
  --readable-muted-dark: rgba(245,247,255,0.78);
  --readable-faint-light: rgba(2,6,23,0.58);
  --readable-faint-dark: rgba(245,247,255,0.64);
}

/* Raise minimum size for small labels/badges */
.userplan,
.badge,
.nav-section,
.pc-topo-tag,
.pc-topo-row-label,
.pc-topology-label,
.pc-topology-sub,
.muted,
.small,
.bios-item-where,
.bios-item-note,
.bios-block-meta{
  font-size: 12.5px !important;
  line-height: 1.35 !important;
  opacity: 1 !important;
  color: var(--readable-muted-light) !important;
}

/* Keep sidebar text readable on dark glass */
.sidebar .userplan,
.sidebar .nav-section,
.sidebar .muted,
.sidebar .pc-topo-tag,
.sidebar .pc-topo-row-label{
  color: var(--readable-muted-dark) !important;
}

/* Ensure nav items never drop too faint */
.nav-item,
.nav-item *{
  opacity: 1 !important;
}

/* Placeholder contrast */
input::placeholder, textarea::placeholder{
  color: var(--readable-faint-light) !important;
  opacity: 1 !important;
}
.sidebar input::placeholder, .sidebar textarea::placeholder{
  color: var(--readable-faint-dark) !important;
}

/* Disabled elements: visible but clearly disabled */
:disabled,
[aria-disabled="true"],
.disabled{
  opacity: 0.9 !important;
}

/* Table / list secondary text commonly uses opacity—normalize */
.meta,
.sub,
.subtext,
.hint,
.helper,
.caption{
  opacity: 1 !important;
  color: var(--readable-muted-light) !important;
  font-size: 12.5px !important;
}

/* Chips/tags: increase legibility */
.tag,
.chip,
.pill,
.pc-topo-tag{
  font-weight: 700 !important;
}


/* =========================================================
   Readability Hard Overrides (v7)
   - Keep UI layout intact; only raise contrast + tiny text.
   ========================================================= */

/* Tiny badges/labels */
.pc-topo-tag,
.pc-topo-row-label,
.chip-small,
.gp-badge{
  font-size:14px !important;
  line-height:1.25 !important;
}

/* Secondary text that was too faint */
.gp-sub{
  color: rgba(232,232,239,0.82) !important;
}

/* Muted/secondary helpers (increase contrast on dark glass surfaces) */
.muted,
.hint,
.page-sub,
.card-desc,
.kpi .label{
  color: rgba(203,213,225,0.92) !important;
  font-size:13px !important;
}

/* Disabled states: keep readable */
.is-disabled,
[disabled],
button:disabled{
  opacity:0.9 !important;
}

/* Placeholder text (readable but still clearly placeholder) */
input::placeholder,
textarea::placeholder{
  opacity:0.90 !important;
}

